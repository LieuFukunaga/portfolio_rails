= render 'layouts/header'
%br
- breadcrumb :lists_show
= breadcrumbs separator: " &rsaquo; "
%br
.lists-show
  %h1.lists-show__page-title
    = "＜リスト”#{@list.list_name}”のタスク一覧＞"
  %br
  .lists-show__operator
    .lists-show__operator__create-task-btn
      = link_to new_list_goal_path(@list) do
        %i.fas.fa-plus-circle
        %span タスクを追加
    .lists-show__operator__search-form
      = form_with url: task_search_lists_path, method: :get, id: "lists-show__search-form" do |f|
        = f.text_field :keyword, placeholder: "タスクを検索する"
        = button_tag type: "submit", id:"lists-show__search-btn" do
          %i.fas.fa-search
  %br
  - if @goals.length != 0
    %table
      %tbody
        %tr
          %th
            サムネイル
          %th
            タスク名
          %th
            予定日時
          %th
            タスクの状態
        - @goals.each.with_index(1) do |goal, index|
          %tr
            - if goal.image.attached?
              %td
                = image_tag goal.image, size: "100x100"
            - else
              %td
                %i.fas.fa-tasks.lists-show__no-image
            %td
              = link_to list_goal_path(@list.id, goal), id: "goal-title_#{index}" do
                = "#{goal.title}"
                %i.fas.fa-angle-double-right
            %td
              = "#{goal.date.strftime("%m月%d日 %H時%M分")}"
            %td
              = goal.status_i18n
            %td
              = link_to edit_list_goal_path(goal.list_id, goal.id) do
                %i.fas.fa-edit
            %td{data: {index: "#{index}"}}
              = link_to list_goal_path(goal.list_id, goal.id), method: :delete, class: "lists-show__delete-btn" do
                %i.fas.fa-trash-alt
  - else
    %p -- NO TASK --
  %br
  = render partial: "layouts/link-to-category-index"
  = render partial: "layouts/return-to-root"